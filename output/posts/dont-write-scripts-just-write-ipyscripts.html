<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Don't write scripts, just write ipyscripts! | Damian's blog</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (es)" href="../es/rss.xml">
<link rel="canonical" href="http://damianavila.github.io/blog/posts/dont-write-scripts-just-write-ipyscripts.html">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
    },
    displayAlign: 'left', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Damian Avila">
<meta property="og:site_name" content="Damian's blog">
<meta property="og:title" content="Don't write scripts, just write ipyscripts!">
<meta property="og:url" content="http://damianavila.github.io/blog/posts/dont-write-scripts-just-write-ipyscripts.html">
<meta property="og:description" content="I usually have some repetitive tasks in my daily work-flow. You probably have some of those too. To save some minutes from your day, you probably write little scripts to do these jobs.
I used to do th">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2013-12-03T21:50:05-03:00">
<meta property="article:tag" content="git">
<meta property="article:tag" content="ipyscript">
<meta property="article:tag" content="IPython">
<meta property="article:tag" content="magic">
<meta property="article:tag" content="python">
<meta property="article:tag" content="workflow">
<link rel="alternate" hreflang="es" href="../es/posts/dont-write-scripts-just-write-ipyscripts.html">
</head>
<body>
    <section class="social"><ul>
<li><a href="../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="../stories/about-me.html" title="About me"><i class="icon-user"></i></a></li>
            <li><a href="https://twitter.com/damian_avila" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/damianavila" title="My Github"><i class="icon-github"></i></a></li>
            <li><a href="https://plus.google.com/u/0/106896109587369688379/posts" title="My Google+"><i class="icon-google-plus"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">Don't write scripts, just write ipyscripts!</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2013-12-03T21:50:05-03:00">2013-12-03 21:50</time>
            
                      |  
        <a href="dont-write-scripts-just-write-ipyscripts.ipynb" id="sourcelink">Source</a>
          |  
        <a href="javascript:%24.getScript(%22/assets/js/miniPageNav.js%22);">Minimap</a>

            </div>
                    <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../categories/git.html" rel="tag">git</a></li>
           <li><a class="tag p-category" href="../categories/ipyscript.html" rel="tag">ipyscript</a></li>
           <li><a class="tag p-category" href="../categories/ipython.html" rel="tag">IPython</a></li>
           <li><a class="tag p-category" href="../categories/magic.html" rel="tag">magic</a></li>
           <li><a class="tag p-category" href="../categories/python.html" rel="tag">python</a></li>
           <li><a class="tag p-category" href="../categories/workflow.html" rel="tag">workflow</a></li>
        </ul>
</div>

        </div>
        <div class="body">
            <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I usually have some repetitive tasks in my daily work-flow. You probably have some of those too. To save some minutes from your day, you probably write little scripts to do these jobs.</p>
<p>I used to do that... but now I am only writing little IPython notebooks to do these simple jobs, I call them <em>ipyscripts</em> (yes, I won a prize for originality, he he!).</p>
<p>These <em>ipyscripts</em> are IPython-powered, so we can use all the IPython's machinery to do complex things in a simple way...
<!-- TEASER_END --></p>
<p>In fact, you are reading a example <em>ipyscript</em>, because this is an IPython notebook (and a blog post too), and the following example deal with a repetitive task I do frequently: the <em>git update</em> of some projects (I contribute to some of them, I follow some others).</p>
<p>First, I load a simple list with the projects I want to update:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
  <div class="input_area">
    <div class=" highlight hl-ipython3"><pre><span></span><span class="n">list_of_projects</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"ipython"</span><span class="p">,</span> 
                    <span class="s2">"kilink"</span><span class="p">,</span> 
                    <span class="s2">"live_reveal"</span><span class="p">,</span> 
                    <span class="s2">"nbviewer"</span><span class="p">,</span> 
                    <span class="s2">"nikola"</span><span class="p">,</span> 
                    <span class="s2">"reveal.js"</span><span class="p">]</span>
</pre></div>

    <i class="icon-hand-up icon-large" style="float:right; margin-bottom:8px; margin-right:10px">
      Click me to hide the output</i>
  </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Second, I save my current directory using the IPython bookmark system:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
  <div class="input_area">
    <div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">bookmark</span> root
</pre></div>

    <i class="icon-hand-up icon-large" style="float:right; margin-bottom:8px; margin-right:10px">
      Click me to hide the output</i>
  </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Third, I define a function to deal with the <em>git update</em> itself:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
  <div class="input_area">
    <div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
    <span class="o">%</span><span class="k">cd</span> {folder}
    <span class="o">!</span>git status
    <span class="o">!</span>git checkout master
    <span class="o">!</span>git remote -v
    <span class="o">!</span>git pull origin
    <span class="o">%</span><span class="k">cd</span> -b root
</pre></div>

    <i class="icon-hand-up icon-large" style="float:right; margin-bottom:8px; margin-right:10px">
      Click me to hide the output</i>
  </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can see here how I am using a lot of tricks from the IPython machinery to make a lot of things in a couple of lines.</p>
<p>The main idea is <code>cd</code> into a specific project folder. I use the braces to pass python variables and expressions to the shell. In this case, I will pass an element of the <code>list_of_projects</code>, I mean the name of the folder containing the desired project. Then, I do the <em>git</em> stuff, just prepending the command with the <code>!</code> sign to pass them to the underlying shell. Finally, I <code>cd</code> into the main directory to get the things prepared to the next loop.</p>
<p>Fourth, I do a simple <code>for</code> loop to iterate through the elements inside the <code>list_of_projects</code> and to do the <em>git update</em> in each of these projects.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
  <div class="input_area">
    <div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_of_projects</span><span class="p">)):</span>
    <span class="n">update</span><span class="p">(</span><span class="n">list_of_projects</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="nb">print</span> <span class="s2">"---------------------------------"</span>
</pre></div>

    <i class="icon-hand-up icon-large" style="float:right; margin-bottom:8px; margin-right:10px">
      Click me to hide the output</i>
  </div>
</div>
</div>

<div class="output_wrapper output_hidden">
  <div class="output">
    
<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>/media/datos/Desarrollos/ipython
# En la rama master
nothing to commit, working directory clean
Ya está en «master»
damianavila	git@github.com:damianavila/ipython.git (fetch)
damianavila	git@github.com:damianavila/ipython.git (push)
origin	git@github.com:ipython/ipython.git (fetch)
origin	git@github.com:ipython/ipython.git (push)
Already up-to-date.
(bookmark:root) -&gt; /media/datos/Desarrollos
/media/datos/Desarrollos
---------------------------------
/media/datos/Desarrollos/kilink
# En la rama master
nothing to commit, working directory clean
Ya está en «master»
damianavila	git@github.com:damianavila/kilink.git (fetch)
damianavila	git@github.com:damianavila/kilink.git (push)
origin	git@github.com:facundobatista/kilink.git (fetch)
origin	git@github.com:facundobatista/kilink.git (push)
Already up-to-date.
(bookmark:root) -&gt; /media/datos/Desarrollos
/media/datos/Desarrollos
---------------------------------
/media/datos/Desarrollos/live_reveal
# En la rama master
nothing to commit, working directory clean
Ya está en «master»
origin	git@github.com:ipython-contrib/live_reveal.git (fetch)
origin	git@github.com:ipython-contrib/live_reveal.git (push)
Already up-to-date.
(bookmark:root) -&gt; /media/datos/Desarrollos
/media/datos/Desarrollos
---------------------------------
/media/datos/Desarrollos/nbviewer
# En la rama master
nothing to commit, working directory clean
Ya está en «master»
heroku	git@heroku.com:zarara.git (fetch)
heroku	git@heroku.com:zarara.git (push)
origin	git@github.com:ipython/nbviewer.git (fetch)
origin	git@github.com:ipython/nbviewer.git (push)
zarara	git@heroku.com:zarara.git (fetch)
zarara	git@heroku.com:zarara.git (push)
Already up-to-date.
(bookmark:root) -&gt; /media/datos/Desarrollos
/media/datos/Desarrollos
---------------------------------
/media/datos/Desarrollos/nikola
# En la rama master
nothing to commit, working directory clean
Ya está en «master»
damianavila	git@github.com:damianavila/nikola.git (fetch)
damianavila	git@github.com:damianavila/nikola.git (push)
origin	git@github.com:getnikola/nikola.git (fetch)
origin	git@github.com:getnikola/nikola.git (push)
Already up-to-date.
(bookmark:root) -&gt; /media/datos/Desarrollos
/media/datos/Desarrollos
---------------------------------
/media/datos/Desarrollos/reveal.js
# En la rama master
nothing to commit, working directory clean
Ya está en «master»
origin	git@github.com:hakimel/reveal.js.git (fetch)
origin	git@github.com:hakimel/reveal.js.git (push)
Already up-to-date.
(bookmark:root) -&gt; /media/datos/Desarrollos
/media/datos/Desarrollos
---------------------------------
</pre>
</div>
</div>

</div>
</div>

  </div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>
<p><strong>ADDENDUM</strong>:</p>
<p>You can actually do:</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">list_of_projects</span><span class="p">:</span> 
    <span class="n">update</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">"---------------------------------"</span>
</pre></div>
<p>But, this is an example, and I wanted to emphasize the fact that you can pass complex arguments inside the braces... Thanks Lex for your comment, I forgot to add this explanation!</p>
<hr>
<p>And that's all! The next time you have to do this task, just run this notebook (properly customized for your projects) and you will get the job done!</p>
<p><strong>NOTE</strong>: And now, the <em>icing on the cake</em>... if you are in IPython master, you do not even need to open the notebook to run it... just open an IPython console or notebook and write the next sentence:</p>
<p><code>%run your_ipyscript.ipynb</code></p>
<p>Yes, you can use the <code>%run</code> magic to <em>run</em> all the code cells from the notebook you pass as an argument ;-) Niceeeeeeeeeee!</p>
<p><strong>NOTE 2</strong>: There is an ongoing <a href="https://github.com/ipython/ipython/pull/4634">PR</a> to make this <em>%run</em> notebook extensive to notebooks containing non-code cells.</p>
<p>OK, I hope you enjoy this post. And I also hope you begin to write <em>ipyscripts</em>.</p>
<p>See you!</p>
<p>Damián</p>

</div>
</div>
</div>
</div>
        </div>
        <p><b>Don't forget this blog post is an ipynb file itself! So, you can download it from the "Source" link
        at the top of the post if you want to play with it ;-)</b></p>
                <ul class="pager hidden-print">
<li class="previous">
                <a href="pyconar-2013.html" rel="prev" title="PyConAr 2013">Previous post</a>
            </li>
            <li class="next">
                <a href="tweet-me-said-an-ipython-notebook-cell-and-i-did-it.html" rel="next" title="Tweet me... said an IPython notebook cell and I did it">Next post</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="damianblogcomments",
            disqus_url="http://damianavila.github.io/blog/posts/dont-write-scripts-just-write-ipyscripts.html",
        disqus_title="Don't write scripts, just write ipyscripts!",
        disqus_identifier="cache/posts/dont-write-scripts-just-write-ipyscripts.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


                            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha256-SDRP1VVYu+tgAGKhddBSl5+ezofHKZeI+OzxakbIe/Y=" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
    },
    displayAlign: 'left', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script>
</div>
                    <footer id="footer"><p>Contents © 2019 <a href="mailto:damianavila82@yahoo.com.ar">Damian Avila</a> - 
Powered by <a href="http://getnikola.com">Nikola</a> - 
Zen theme based in <a href="https://github.com/arusahni/website-template">Arusahni's website-template</a><br><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.5/ar/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png"></a></p>
            
        </footer>
</div>
    </section><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-139225553-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-139225553-1');
</script><script src="../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
